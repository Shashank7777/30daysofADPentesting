# DAY- 1( Active directory Basics Enumeration)

# (Powerview Module)

References :

[https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-1/](https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-1/)

[https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-2/](https://nored0x.github.io/red-teaming/active-directory-domain-enumeration-part-1/)

[https://gist.github.com/HarmJ0y/184f9822b195c52dd50c379ed3117993](https://gist.github.com/HarmJ0y/184f9822b195c52dd50c379ed3117993)

[https://medium.com/@Shorty420/enumerating-ad-98e0821c4c78](https://medium.com/@Shorty420/enumerating-ad-98e0821c4c78)

Domain Enumeration with PowerView.

Note: Powerview is a powerful Powershell script from PowerShell empire that can be used for enumerating a domain after you have already gained a shell in the system.

### Domain :

Domains are a hierarchical way of organizing users and computers that work together on the same network.

After you have PowerView on the system with the shell you can use the following commands :

- Bypassing the execution policy of Powershell allows to easily run scripts :

<aside>
💡 powershell -ep bypass

</aside>

- To run the Powerview file :

<aside>
💡 .\PowerView.ps1

</aside>

- Enumerate the domain User :

<aside>
💡 Get-NetUser | select cn

</aside>

- Enumerate the domain groups :

<aside>
💡 Get-NetGroup -GroupName **admin**

</aside>

- Finding Share

<aside>
💡 Invoke-ShareFinder

</aside>

- Information about the operating system :

<aside>
💡 Get-NetComputer -fulldata | select operatingsystem

</aside>

- Enumerating Other Domains

<aside>
💡 Get-Domain -Domain <Domain_Name>

</aside>

- Getting Domain SID

<aside>
💡 Get-DomainSID

</aside>

### Domain Policy:

 A domain Security policy: is a security policy that is specifically applied to a given domain or set of computers or drivers in a given system. System administrators use a domain security policy to set security protocols for part of a network, including password protocols, access levels and much more.

- Getting Domain Policy

<aside>
💡 Get-DomainPolicy

</aside>

- Information about the policy configurations of the domain about the system access :

<aside>
💡 (Get-DomainPolicy).”SystemAccess”

</aside>

- Information about the policy configurations of the Domain about kerberos

<aside>
💡 (Get-DomainPolicy).”kerberospolicy”

</aside>

### Domain Controller :

A domain controller is a server that responds to authentication requests and verifies users on computer networks, keeping all of the data organized and secured.

- Information about domain controller

<aside>
💡 Get-DomainController

</aside>

- Listing the computers in the current domain

<aside>
💡 Get-NetComputer | select name

</aside>

### Domain User:

A domain user is one whose username and password are stored on a domain controller rather than the computer the user is logging into. When you log in to the computer as a domain user, the system asks the domain controller about what privileges are provided to you.

- Information about the domain User

<aside>
💡 Get-DomainUser

</aside>

- Listing all the properties of the user

<aside>
💡 Get-DomainUser -Identity <username>

</aside>

- user logged on to a machine

<aside>
💡 Get-Netloggedon -ComputerName <computer_name>

</aside>

- Listing the computers that are in the current domain

<aside>
💡 Get-NetComputer | select name

</aside>

### Groups :

Groups are used to collect user accounts, computer accounts, and other groups into manageable units. Working with groups instead of with individual users helps simplify network maintenance and administration.

- Listing all the groups in the current domain

<aside>
💡 Get-NetGroup | select name

</aside>

- Listing all the groups in the target domain

<aside>
💡 Get-NetGroup -Domain <target_domain> | select name

</aside>

- Getting all data about a specific group

<aside>
💡 Get-NetGroup ‘Domain Admins’

</aside>

### Local Groups ;

The Groups folder in the Local Users and Groups MMC snap-in displays all the default local groups and the ones created by administrators or users with administrative privileges. Local groups can hold administrator accounts, local user accounts, domain user accounts, computer accounts, guest accounts, remote desktop user accounts, etc.

- Getting the list of Local Groups

<aside>
💡 Get-NetLocalGroup | Select-Object GroupName

</aside>

- Listing all the local groups on a machine

<aside>
💡 Get-NetLocalGroup

</aside>